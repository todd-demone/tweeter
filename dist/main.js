(()=>{"use strict";const e=e=>{const t=$(".new-tweet .error");return t.children(".msg").html(e),t.slideDown(),$("#tweet-text").focus(),!1},t=e=>`\n    <article class="tweet">\n      <header>\n        <div class="avatar-and-name">\n          <img src="${e.user.avatars}" alt="small-avatar" width="48" height="48">\n          <span class="name">${e.user.name}</span>\n        </div>\n        <div class="handle">\n          <span>${e.user.handle}</span>\n        </div>\n      </header>\n      <main>${n(e.content.text)}</main>\n      <footer>\n        <span class="date">${timeago.format(e.created_at)}</span>\n        <div>\n          <i class="fa-solid fa-flag"></i>\n          <i class="fa-solid fa-retweet"></i>\n          <i class="fa-solid fa-heart"></i>\n        </div>\n      </footer>\n    </article>\n  `,n=e=>{let t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},s=()=>{$.get("/tweets").then((e=>(e=>{const n=$("#tweets-container");n.html(""),e.forEach((e=>{const s=t(e);n.append(s)}))})(e))).catch((t=>{$(".new-tweet").slideDown(),e(`Error: Tweets aren't available at this time (${t.status} ${t.statusText})`)}))},a=t=>{const n=$(t.currentTarget),a=n.children("#tweet-text").val(),r=n.serialize();return t.preventDefault(),a?a.length>140?e("Tweets can't exceed 140 characters."):void $.post("/tweets",r).then((()=>{s(),n.trigger("reset"),n.find(".counter").text("140")})).catch((t=>e(`Error: Your tweet did not get sent (${t.status} ${t.statusText})`))):e("You can't send an empty tweet.")};$(document).ready((function(){s(),$(".toggle-tweet").on("click",(()=>{$(".new-tweet").slideToggle("slow"),$("#tweet-text").focus()})),$(".scroll-top").on("click",(e=>{const t=$(e.currentTarget),n=t.siblings(".toggle-tweet");$("html, body").animate({scrollTop:0}).promise().then((()=>{t.slideUp("slow"),n.slideDown("slow"),$(".new-tweet").slideDown("slow"),$("#tweet-text").focus()}))})),$(window).on("scroll",(e=>{const t=$(e.currentTarget).scrollTop(),n=$(".scroll-top"),s=n.siblings(".toggle-tweet");t>150?(n.slideDown("slow"),s.slideUp()):(n.slideUp("slow"),s.slideDown("slow"))})),$("#tweet-form").on("submit",a),$("#tweet-form").on("keydown",(e=>{13===e.keyCode&&a(e)})),$("#tweet-text").on("input",(e=>{const t=$(e.currentTarget),n=t.parent().find(".counter"),s=140-t.val().length,a=t.parent().siblings(".error"),r=a.children(".msg");s<0?(n.addClass("negative"),r.html("Tweets can't exceed 140 characters."),a.slideDown()):(n.removeClass("negative"),a.slideUp()),n.text(s)}))}))})();